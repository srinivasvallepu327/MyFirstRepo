sap.ui.define(["emc/fin/ar/cnu/controller/BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/Filter"],function(e,t,i,n,o){"use strict";return e.extend("emc.fin.ar.cnu.controller.View2",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("detail").attachMatched(this.herculis,this)},herculis:function(e){var t="/"+e.getParameter("arguments").fruitId;i.show("Herculis is called Path is : "+t);this.getView().bindElement(t)},onBack:function(){this.getView().getParent().to("idView1")},field:null,oCityPopup:null,onF4:function(e){this.field=e.getSource();var t=this;if(!this.oCityPopup){n.load({id:"city",name:"emc.fin.ar.cnu.fragments.popup",controller:this}).then(function(e){t.oCityPopup=e;t.getView().addDependent(e);e.setTitle("City");e.setMultiSelect(false);e.bindAggregation("items",{path:"/cities",template:new sap.m.DisplayListItem({value:"{type}",label:"{name}"})});e.open()})}else{this.oCityPopup.open()}},onConfirm:function(e){var t=e.getSource().getId();if(t.indexOf("supplier")!=-1){var i=this.getView().byId("idTable");var n=e.getParameter("selectedItems");var s=[];for(let e=0;e<n.length;e++){const t=n[e];var r=t.getLabel();s.push(new o("name","EQ",r))}if(s){i.getBinding("items").filter(s)}else{i.getBinding("items").filter([])}}else{this.field.setValue(e.getParameter("selectedItem").getLabel())}},oSupplierPopup:null,onFilterSupplier:function(){var e=this;if(!this.oSupplierPopup){n.load({id:"supplier",name:"emc.fin.ar.cnu.fragments.popup",controller:this}).then(function(t){e.oSupplierPopup=t;e.getView().addDependent(t);t.setTitle("Suppliers");t.bindAggregation("items",{path:"/suppliers",template:new sap.m.DisplayListItem({value:"{city}",label:"{name}"})});t.open()})}else{this.oSupplierPopup.open()}},onSave:function(){t.confirm("Are you sure?",{title:"Confirm Me!",onClose:function(e){if(e==="OK"){i.show("Dude, I saved your order now!!")}else{t.error("OMG!! You cancelled it")}}})},onItemPress:function(e){var t=e.getParameter("listItem").getBindingContextPath();var n=t.split("/")[t.split("/").length-1];this.oRouter.navTo("supplier",{suppId:n});i.show("TODO: Next view navigation to be implemented here")}})});